<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Door Effect</title>
    <style>
      body {
          margin: 0;
          font-family: sans-serif;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          background-color: #000;
      }
      .main-content {
          color:aliceblue;
          text-align: center;
          z-index: 1; 
      }
      .door-container {
          position: absolute;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          overflow: hidden;
          z-index: 10;
          pointer-events: none;
      }
      .door {
          position: absolute;
          top: 50%;
          height: 100vh;
          background-repeat: no-repeat;
          background-color: #333;
          transition: transform 1s cubic-bezier(.77,0,.18,1);
          pointer-events: auto;
      }
      .left-door, .right-door {
          width: 0;
      }
      .left-door {
          left: 50%;
          transform: translate(-100%, -50%) translateX(0);
      }
      .right-door {
          left: 50%;
          transform: translate(0, -50%) translateX(0);
      }
      .left-door.open {
          transform: translate(-100%, -50%) translateX(-100%);
      }
      .right-door.open {
          transform: translate(0, -50%) translateX(100%);
      }
      #toggle-door-button {
          position: fixed;
          bottom: 10px;
          right: 10px;  
          z-index: 20;
          margin: 10px;
          cursor: pointer;
      }
    </style>    
  </head>
  <body>
    <div class="main-content">
      <main>
      <div id="sidebar" >
	  Gate Of Golden Tartar
	  <img src="img/tartargate.png"></a>
      </div>
    </main>    
    </div>
    <div class="door-container">
      <div id="left-door" class="door left-door"></div>
      <div id="right-door" class="door right-door"></div>
    </div>
    <div id="tartar-check-container"></div>
    <img id="toggle-door-button" src="../favicon.ico" alt="Toggle Door" width="32" height="32" style="display:none;">
    <script src="tartarcheck.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
          const leftDoor = document.getElementById("left-door");
          const rightDoor = document.getElementById("right-door");
          const toggleButton = document.getElementById("toggle-door-button");
          let isOpen = false;
          let imgAspect = 1920 / 1080; 
          const img = new window.Image();
          img.src = '../img/gate.png';
          img.onload = function() {
              imgAspect = img.naturalWidth / img.naturalHeight;
              leftDoor.style.backgroundImage = `url('${img.src}')`;
              rightDoor.style.backgroundImage = `url('${img.src}')`;
              resizeDoors();
          };

          function resizeDoors() {
              const winH = window.innerHeight;
              const imgW = Math.round(winH * imgAspect);
              const doorW = Math.floor(imgW / 2);
              const rightDoorW = imgW - doorW;

              leftDoor.style.width = doorW + "px";
              rightDoor.style.width = rightDoorW + "px";
              leftDoor.style.backgroundSize = imgW + "px " + winH + "px";
              rightDoor.style.backgroundSize = imgW + "px " + winH + "px";
              leftDoor.style.backgroundPosition = "left center";
              rightDoor.style.backgroundPosition = "-" + doorW + "px center";
          }

          window.addEventListener("resize", resizeDoors);

          toggleButton.addEventListener("click", () => {
              leftDoor.classList.toggle("open");
              rightDoor.classList.toggle("open");
              isOpen = !isOpen;
          });
      });
    </script>
  </body>
</html>
